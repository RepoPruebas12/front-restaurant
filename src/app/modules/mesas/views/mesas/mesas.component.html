<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6">
  <!-- Header -->
  <div class="mb-6">
    <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-1">Mesas del Restaurante</h1>
    <p class="text-gray-600 text-sm md:text-base">Selecciona una mesa para gestionar pedidos</p>
  </div>

  <!-- Filtros por SalÃ³n -->
  <div class="flex flex-wrap gap-2 mb-6">
    <button *ngFor="let salon of salones"
            (click)="filtrarPorSalon(salon.id)"
            [class.bg-gradient-to-r]="salonSeleccionado === salon.id"
            [class.from-orange-500]="salonSeleccionado === salon.id"
            [class.to-orange-600]="salonSeleccionado === salon.id"
            [class.text-white]="salonSeleccionado === salon.id"
            [class.shadow-lg]="salonSeleccionado === salon.id"
            [class.bg-white]="salonSeleccionado !== salon.id"
            [class.text-gray-700]="salonSeleccionado !== salon.id"
            [class.border]="salonSeleccionado !== salon.id"
            [class.border-gray-300]="salonSeleccionado !== salon.id"
            class="px-4 md:px-6 py-2 md:py-3 rounded-xl font-semibold text-sm md:text-base hover:scale-105 transform transition-all duration-200">
      {{ salon.nombre }}
    </button>
  </div>

  <!-- Leyenda de estados -->
  <div class="flex flex-wrap items-center gap-4 md:gap-6 mb-6 p-4 bg-white rounded-xl shadow-sm border border-gray-200">
    <div class="flex items-center space-x-2">
      <div class="w-3 h-3 rounded-full" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);"></div>
      <span class="text-xs md:text-sm font-medium text-gray-700">Libre</span>
    </div>
    <div class="flex items-center space-x-2">
      <div class="w-3 h-3 rounded-full" style="background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);"></div>
      <span class="text-xs md:text-sm font-medium text-gray-700">Ocupada</span>
    </div>
    <div class="flex items-center space-x-2">
      <div class="w-3 h-3 rounded-full" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);"></div>
      <span class="text-xs md:text-sm font-medium text-gray-700">Pide Cuenta</span>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="flex justify-center items-center h-64">
    <div class="animate-spin rounded-full h-12 w-12 border-4 border-orange-200 border-t-orange-600"></div>
  </div>

  <!-- Grid de Mesas -->
  <div *ngIf="!isLoading" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4">
    <div *ngFor="let mesa of mesasFiltradas"
         (click)="abrirModal(mesa)"
         class="relative group cursor-pointer transform transition-all duration-300 hover:scale-105 hover:z-10">
      <div [style.background]="
             mesa.estado_id === 0 ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)' :
             mesa.estado_id === 1 ? 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)' :
             'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)'
           "
           class="rounded-2xl shadow-lg p-4 md:p-6 text-white flex flex-col items-center justify-center aspect-square relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-tr from-white/0 via-white/10 to-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

        <div class="relative z-10">
          <svg class="w-8 h-8 md:w-10 md:h-10 mb-2 opacity-90" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
            <path d="m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8"></path>
            <path d="M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7"></path>
            <path d="m2.1 21.8 6.4-6.3"></path>
            <path d="m19 5-7 7"></path>
          </svg>
          <p class="text-xl md:text-2xl font-bold mb-1">{{ mesa.numero }}</p>
          <div *ngIf="mesa.estado_id !== 0" class="flex items-center justify-center space-x-1 text-xs opacity-90">
            <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            <span class="font-semibold">{{ mesa.comensales }}/{{ mesa.capacidad }}</span>
          </div>
        </div>

        <div *ngIf="mesa.estado_id !== 0" class="absolute top-2 right-2 w-2 h-2 rounded-full bg-white shadow-lg animate-pulse"></div>
      </div>
    </div>
  </div>

  <!-- MODAL COMENSALES (Componente) -->
  <app-modal-comensales
    *ngIf="showModal"
    [mesa]="mesaSeleccionada"
    [comensales]="comensalesTemp"
    (cerrar)="cerrarModal()"
    (registrar)="registrarMesa()"
    (incrementar)="incrementarComensales()"
    (decrementar)="decrementarComensales()">
  </app-modal-comensales>

    <!-- MODAL COBRO (Componente) -->
  <app-modal-cobro
    *ngIf="showModalCobro"
    [mesa]="mesaSeleccionada"
    [orden]="ordenCobro"
    [items]="itemsCobro"
    [metodoPago]="metodoPago"
    (cerrar)="cerrarModalCobro()"
    (cobrar)="cobrar()"
    (cambiarMetodo)="cambiarMetodoPago($event)">
  </app-modal-cobro>

</div>
